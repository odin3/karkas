{"version":3,"sources":["file:///karkas.min.js","file:///webpack/bootstrap f2edbe17ee7451b93ed9","file:///D:\\Code\\karkas\\src\\karkas.ts","file:///D:\\Code\\karkas\\src\\filters\\array.ts","file:///D:\\Code\\karkas\\src\\filters\\capitalize.ts","file:///D:\\Code\\karkas\\src\\filters\\currency.ts","file:///D:\\Code\\karkas\\src\\filters\\json.ts","file:///D:\\Code\\karkas\\src\\filters\\math.ts","file:///D:\\Code\\karkas\\src\\filters\\string.ts","file:///D:\\Code\\karkas\\src\\filters\\toLower.ts","file:///D:\\Code\\karkas\\src\\filters\\toUpper.ts","file:///D:\\Code\\karkas\\src\\filters\\template.ts","file:///D:\\Code\\karkas\\src\\index.ts","file:///D:\\Code\\karkas\\src\\view.ts","file:///D:\\Code\\karkas\\src\\karkas-dom.ts","file:///D:\\Code\\karkas\\src\\filters\\index.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","view_1","Karkas","this","_version","views","Map","filters","dispose","clear","getView","templateName","has","ReferenceError","getFilter","filterName","filter","filterQuery","query","trim","split","length","filterArgs","Function","concat","apply","ex","Error","message","compile","context","template","Array","parseArray","parse","createView","view","View","set","addFilter","filterFunc","arrayFilter","operation","args","_i","arguments","capitalizeFilter","val","String","substring","toUpperCase","currencyFilter","$value","$currency","$digitsToFixed","t","isNaN","Math","abs","undefined","parseInt","toFixed","j","substr","replace","slice","jsonFilter","JSON","stringify","mathFilter","$operation","splice","stringFilter","toLowerFilter","toLowerCase","toUpperFilter","templateFilter","v","console","log","karkas_1","karkas_dom_1","filters_1","karkas","instance","window","KarkasDOM","injectDefaultFilters","default","SEARCH_PATTERN","valueParserFactory","expressionName","def","handler","content","parseExpression","expression","fields","sReturn","toString","tpFields","match","pattern","pat","currentField","keys","key","newVal","arr","_this","map","join","e","nul","__extends","extendStatics","setPrototypeOf","__proto__","b","__","constructor","create","DEF_ERR_CB","error","_super","document","addEventListener","refresh","onFind","compileElement","element","tempName","getAttribute","tempData","COMPILED_ELEMENT_TEMPLATE","COMPILED_ELEMENT_DATA","innerHTML","refreshItems","templateSelector","w","querySelectorAll","requestedToParse","include","url","successCallback","makeRequest","onSuccess","onError","xhr","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","Promise","karkasInstance","currency_1","string_1","array_1","math_1","json_1","capitalize_1","toLower_1","template_1","toUpper_1","array_2","capitalize_2","currency_2","json_2","math_2","string_2","toLower_2","toUpper_2","template_2"],"mappings":"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","file":"karkas.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 10);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar view_1 = __webpack_require__(11);\r\nvar Karkas = (function () {\r\n    function Karkas() {\r\n        this._version = '4.0.0';\r\n        /**\r\n         * List of views\r\n         *\r\n         * @memberof Karkas\r\n         */\r\n        this.views = new Map();\r\n        /**\r\n         * List of filters\r\n         *\r\n         * @memberof Karkas\r\n         */\r\n        this.filters = new Map();\r\n    }\r\n    Object.defineProperty(Karkas.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Reset instance\r\n     *\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.dispose = function () {\r\n        this.views.clear();\r\n    };\r\n    /**\r\n     * Get view\r\n     *\r\n     * @param {string} templateName\r\n     * @returns {string}\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.getView = function (templateName) {\r\n        if (!this.views.has(templateName)) {\r\n            throw new ReferenceError(\"Karkas: View '\" + templateName + \"' is not defined\");\r\n        }\r\n        return this.views.get(templateName);\r\n    };\r\n    /**\r\n     * Get filter\r\n     *\r\n     * @param {string} filterName\r\n     * @returns {Function}\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.getFilter = function (filterName) {\r\n        if (!this.filters.has(filterName)) {\r\n            throw new ReferenceError(\"Karkas: Filter '\" + filterName + \"' is not defined\");\r\n        }\r\n        return this.filters.get(filterName);\r\n    };\r\n    /**\r\n     * Apply filter on query expression\r\n     *\r\n     * @param {string} filterQuery\r\n     * @param {*} value Target object\r\n     * @returns {string}\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.filter = function (filterQuery, value) {\r\n        // Extract filter name and args\r\n        var query = filterQuery.trim().split(\":\");\r\n        var filterName = query[0];\r\n        // Array of arguments that we will push to the filter\r\n        // At start there will be only expression value\r\n        value = [value];\r\n        // Try to find another args\r\n        if (query.length > 1) {\r\n            var filterArgs = (new Function(\"return [\" + query[1].trim() + \"]\"))();\r\n            value = value.concat(filterArgs);\r\n        }\r\n        if (!this.filters.has(filterName)) {\r\n            throw new ReferenceError(\"Karkas: filter '\" + filterName + \"' is not defined\");\r\n        }\r\n        try {\r\n            // Find and call the filter with selected args\r\n            var filter = this.filters.get(filterName);\r\n            return filter.apply(this, value);\r\n        }\r\n        catch (ex) {\r\n            throw new Error(\"Karkas: failed to apply filter '\" + filterName + \"', reason: \" + ex.message);\r\n        }\r\n    };\r\n    /**\r\n     * Compile template with content\r\n     *\r\n     * @param {string} templateName\r\n     * @param {(Array<any> | any)} [context={}]\r\n     * @returns\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.compile = function (templateName, context) {\r\n        if (context === void 0) { context = {}; }\r\n        // Output buffer\r\n        var template = this.getView(templateName);\r\n        var output = '';\r\n        if (context instanceof Array) {\r\n            output = template.parseArray(context);\r\n        }\r\n        else {\r\n            output = template.parse(context);\r\n        }\r\n        return output;\r\n    };\r\n    ;\r\n    /**\r\n     * Create a new prepared view instance and injects it\r\n     *\r\n     * @param {string} name\r\n     * @param {string} template\r\n     * @returns {View}\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.createView = function (name, template) {\r\n        var view = new view_1.View(this, name, template);\r\n        this.views.set(name, view);\r\n        return view;\r\n    };\r\n    /**\r\n     * Add filter\r\n     *\r\n     * @param {string} name\r\n     * @param {Function} filterFunc\r\n     * @returns {Karkas}\r\n     * @memberof Karkas\r\n     */\r\n    Karkas.prototype.addFilter = function (name, filterFunc) {\r\n        this.filters.set(name, filterFunc);\r\n        return this;\r\n    };\r\n    return Karkas;\r\n}());\r\nexports.Karkas = Karkas;\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Array filter\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction arrayFilter(value, operation) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    try {\r\n        return ([])[operation].apply(value, args);\r\n    }\r\n    catch (ex) {\r\n        throw new Error(\"Failed to perform method `Array.\" + operation + \"` (\" + ex.message + \")\");\r\n    }\r\n}\r\nexports.arrayFilter = arrayFilter;\r\n;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas.filters.capitalize\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction capitalizeFilter(val) {\r\n    val = String(val);\r\n    return val.substring(0, 1).toUpperCase() + val.substring(1);\r\n}\r\nexports.capitalizeFilter = capitalizeFilter;\r\n;\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Currency filter\r\n *\r\n * @package karkas.filters.currency\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction currencyFilter($value, $currency, $digitsToFixed) {\r\n    if ($currency === void 0) { $currency = '$'; }\r\n    // Currency by default is USD\r\n    $currency = $currency || \"$\";\r\n    function formatMoney(n, c, d, t) {\r\n        var c = isNaN(c = Math.abs(c)) ? 2 : c, d = d == undefined ? \".\" : d, t = t == undefined ? \",\" : t, s = n < 0 ? \"-\" : \"\", i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + \"\", j = (j = i.length) > 3 ? j % 3 : 0;\r\n        return s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\r\n    }\r\n    return $currency + \" \" + formatMoney($value, $digitsToFixed);\r\n}\r\nexports.currencyFilter = currencyFilter;\r\n;\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * JSON filter\r\n *\r\n * @package karkas.filters.json\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction jsonFilter(val) {\r\n    try {\r\n        return JSON.stringify(val);\r\n    }\r\n    catch (ex) {\r\n        return val;\r\n    }\r\n}\r\nexports.jsonFilter = jsonFilter;\r\n;\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Math filter\r\n *\r\n * @package karkas.filters.math\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction mathFilter($value, $operation) {\r\n    try {\r\n        [].splice.apply(arguments, [1, 1]);\r\n        return Math[$operation].apply(Math, arguments);\r\n    }\r\n    catch (ex) {\r\n        throw new Error(\"Failed to perform method `Math.\" + $operation + \"` (\" + ex.message + \")\");\r\n    }\r\n}\r\nexports.mathFilter = mathFilter;\r\n;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * String filter\r\n *\r\n * @package karkas.filters.string\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction stringFilter(value, operation) {\r\n    var args = [];\r\n    for (var _i = 2; _i < arguments.length; _i++) {\r\n        args[_i - 2] = arguments[_i];\r\n    }\r\n    try {\r\n        return String.prototype[operation].apply(value, args);\r\n    }\r\n    catch (ex) {\r\n        throw new Error(\"Failed to perform method 'String.\" + operation + \"' (\" + ex.message + \")\");\r\n    }\r\n}\r\nexports.stringFilter = stringFilter;\r\n;\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas.filters.toLower\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction toLowerFilter(val) {\r\n    return String(val).toLowerCase();\r\n}\r\nexports.toLowerFilter = toLowerFilter;\r\n;\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas.filters.toUpper\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction toUpperFilter(val) {\r\n    return String(val).toUpperCase();\r\n}\r\nexports.toUpperFilter = toUpperFilter;\r\n;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Array filter\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction templateFilter(value, templateName) {\r\n    if (typeof templateName === 'undefined') {\r\n        throw new ReferenceError('Template name is not defined');\r\n    }\r\n    try {\r\n        var v = this.compile(templateName, value);\r\n        console.log(value, templateName, v);\r\n        return v;\r\n    }\r\n    catch (ex) {\r\n        throw new Error(\"Failed to compile template '\" + templateName + \"' (\" + ex.message + \")\");\r\n    }\r\n}\r\nexports.templateFilter = templateFilter;\r\n;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar karkas_1 = __webpack_require__(0);\r\nvar karkas_dom_1 = __webpack_require__(12);\r\nvar filters_1 = __webpack_require__(13);\r\n/**\r\n * Export suitable karkas version (DOM or common)\r\n */\r\nvar getInstance = function () {\r\n    var instance = null;\r\n    if (typeof window !== 'undefined') {\r\n        if (typeof window['karkas'] === 'undefined') {\r\n            instance = new karkas_dom_1.KarkasDOM();\r\n            window['karkas'] = instance;\r\n        }\r\n        else {\r\n            instance = window['karkas'];\r\n        }\r\n    }\r\n    else {\r\n        instance = new karkas_1.Karkas();\r\n    }\r\n    // Add default filters\r\n    filters_1.injectDefaultFilters(instance);\r\n    return instance;\r\n};\r\nvar karkas = getInstance();\r\nexports.default = karkas;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar SEARCH_PATTERN = /[\\{\\{](.*?)[\\}\\}]+/gim;\r\nvar valueParserFactory = function (expressionName) {\r\n    return new Function(\"with(this) { return \" + expressionName + \"; }\");\r\n};\r\nvar t = function (v, t) { return typeof v === t; };\r\nvar def = function (val) { return !t(val, 'undefined'); };\r\nvar View = (function () {\r\n    function View(handler, name, content) {\r\n        if (content === void 0) { content = null; }\r\n        this.handler = handler;\r\n        this.name = null;\r\n        this.content = null;\r\n        if (typeof content !== 'string') {\r\n            throw new ReferenceError('Karkas.View: Template content must be a string');\r\n        }\r\n        this.name = name;\r\n        this.content = content.trim();\r\n    }\r\n    Object.defineProperty(View.prototype, \"pattern\", {\r\n        get: function () {\r\n            return SEARCH_PATTERN;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Parse single expression from object\r\n     * @param   {Object} object     Object\r\n     * @param   {String} expression Expression\r\n     * @returns {*} Value\r\n     */\r\n    View.prototype.parseExpression = function (object, expression) {\r\n        return valueParserFactory(expression).apply(object);\r\n    };\r\n    /**\r\n     * Parse an single object using the template\r\n     * @param fields Object\r\n     * @returns {string} Compiled content\r\n     */\r\n    View.prototype.parse = function (fields) {\r\n        var sReturn = this.content.toString(), tpFields = sReturn.match(this.pattern);\r\n        for (var pat in tpFields) {\r\n            var currentField = tpFields[pat];\r\n            if (t(currentField, 'string') || t(currentField, 'number')) {\r\n                // Remove brackets and extract filters\r\n                var keys = currentField.replace('{{', '').replace('}}', '').trim().split('|');\r\n                // Check for filters and expressions\r\n                var filter = (keys.length > 1) ? keys[keys.length - 1] : undefined;\r\n                var key = keys[0];\r\n                //  replace expression with object\r\n                var newVal = void 0;\r\n                try {\r\n                    newVal = this.parseExpression(fields, key);\r\n                }\r\n                catch (ex) {\r\n                    throw new ReferenceError(\"Karkas: failed to parse expression '\" + key + \"' in template '\" + this.name + \"'. \" + ex.message);\r\n                }\r\n                // If value is undefined - replace it\r\n                if (!def(newVal))\r\n                    newVal = '';\r\n                // Use filter or template if available in expression\r\n                if (def(filter)) {\r\n                    newVal = this.handler.filter(filter, newVal);\r\n                }\r\n                sReturn = sReturn.replace(currentField, newVal);\r\n            }\r\n        }\r\n        return sReturn;\r\n    };\r\n    /**\r\n     * Parse an array of objects using the template\r\n     * @param arr\r\n     * @returns {string} Compiled content\r\n     */\r\n    View.prototype.parseArray = function (arr) {\r\n        var _this = this;\r\n        return arr.map(function (i) { return _this.parse(i); }).join('');\r\n    };\r\n    return View;\r\n}());\r\nexports.View = View;\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar karkas_1 = __webpack_require__(0);\r\nfunction def(e) { return typeof e !== 'undefined'; }\r\nfunction nul(e) { return e === null; }\r\nvar COMPILED_ELEMENT_SELECTOR = '*[data-compile]', COMPILED_ELEMENT_DATA = 'data-compile', COMPILED_ELEMENT_TEMPLATE = 'data-view', VIEW_SCRIPT_MIME_TYPE = 'text/karkas';\r\nvar DEF_ERR_CB = function (e) { return console.error(e); };\r\nvar KarkasDOM = (function (_super) {\r\n    __extends(KarkasDOM, _super);\r\n    function KarkasDOM() {\r\n        var _this = _super.call(this) || this;\r\n        if (!def(window))\r\n            throw new ReferenceError('Karkas DOM extensions requries browser');\r\n        if (!def(window.document))\r\n            throw new Error('Karkas DOM extensions requires a document object');\r\n        document.addEventListener('DOMContentLoaded', function () { return _this.refresh(); });\r\n        return _this;\r\n    }\r\n    KarkasDOM.prototype.onFind = function () { };\r\n    KarkasDOM.prototype.compileElement = function (element) {\r\n        var tempName = element.getAttribute(COMPILED_ELEMENT_TEMPLATE), tempData = element.getAttribute(COMPILED_ELEMENT_DATA);\r\n        if (nul(tempName))\r\n            throw new ReferenceError(COMPILED_ELEMENT_TEMPLATE + ' is undefined');\r\n        if (nul(tempData))\r\n            throw new ReferenceError(COMPILED_ELEMENT_DATA + ' is undefined');\r\n        tempName = tempName.trim();\r\n        tempData = tempData.trim();\r\n        try {\r\n            tempData = JSON.parse(tempData);\r\n            element.innerHTML += this.compile(tempName, tempData);\r\n        }\r\n        catch (ex) {\r\n            console.error('Karkas: failed to compile element', {\r\n                element: element,\r\n                error: ex\r\n            });\r\n        }\r\n    };\r\n    KarkasDOM.prototype.refresh = function (refreshItems) {\r\n        if (refreshItems === void 0) { refreshItems = true; }\r\n        // Views container\r\n        if (refreshItems)\r\n            this.dispose();\r\n        var templateSelector = \"script[type=\\\"\" + VIEW_SCRIPT_MIME_TYPE + \"\\\"]\";\r\n        if (!refreshItems)\r\n            templateSelector += ':not([data-loaded])';\r\n        // Select all templates\r\n        var w = document.querySelectorAll(templateSelector);\r\n        // Grep all elements\r\n        for (var c = 0; c < w.length; c++) {\r\n            this.createView(w[c].getAttribute(\"name\"), w[c].innerHTML);\r\n        }\r\n        // find items by attr and parse them\r\n        var requestedToParse = document.querySelectorAll(COMPILED_ELEMENT_SELECTOR);\r\n        if (!requestedToParse.length)\r\n            return true;\r\n        for (var i = 0; i < requestedToParse.length; i++) {\r\n            this.compileElement(requestedToParse[i]);\r\n        }\r\n        if (typeof this.onFind === 'function') {\r\n            this.onFind();\r\n        }\r\n    };\r\n    ;\r\n    KarkasDOM.prototype.include = function (url, templateName, successCallback) {\r\n        if (successCallback === void 0) { successCallback = null; }\r\n        function makeRequest(onSuccess, onError) {\r\n            var _this = this;\r\n            if (onError === void 0) { onError = DEF_ERR_CB; }\r\n            var xhr = new XMLHttpRequest();\r\n            xhr.open(\"GET\", url);\r\n            xhr.onload = function () {\r\n                if (xhr.status >= 200 && xhr.status < 300) {\r\n                    var template = _this.createView(templateName, xhr.response);\r\n                    onSuccess(template, xhr.response);\r\n                }\r\n                else {\r\n                    onError({\r\n                        status: _this.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                if (def(onError)) {\r\n                    onError({\r\n                        status: xhr.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n                else {\r\n                    console.error('Karkas: Failed to import remote template: ', {\r\n                        status: xhr.status,\r\n                        statusText: xhr.statusText\r\n                    });\r\n                }\r\n            };\r\n            xhr.send();\r\n        }\r\n        if (typeof url !== 'string')\r\n            throw new ReferenceError('Karkas: Url is not a String');\r\n        templateName = templateName || url;\r\n        if ((typeof successCallback === 'function') || !('Promise' in window)) {\r\n            return makeRequest(successCallback);\r\n        }\r\n        return new Promise(makeRequest);\r\n    };\r\n    ;\r\n    return KarkasDOM;\r\n}(karkas_1.Karkas));\r\nexports.KarkasDOM = KarkasDOM;\r\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\n/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Karkas embedded filters\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar array_1 = __webpack_require__(1);\r\nvar capitalize_1 = __webpack_require__(2);\r\nvar currency_1 = __webpack_require__(3);\r\nvar json_1 = __webpack_require__(4);\r\nvar math_1 = __webpack_require__(5);\r\nvar string_1 = __webpack_require__(6);\r\nvar toLower_1 = __webpack_require__(7);\r\nvar toUpper_1 = __webpack_require__(8);\r\nvar template_1 = __webpack_require__(9);\r\nvar array_2 = __webpack_require__(1);\r\nexports.arrayFilter = array_2.arrayFilter;\r\nvar capitalize_2 = __webpack_require__(2);\r\nexports.capitalizeFilter = capitalize_2.capitalizeFilter;\r\nvar currency_2 = __webpack_require__(3);\r\nexports.currencyFilter = currency_2.currencyFilter;\r\nvar json_2 = __webpack_require__(4);\r\nexports.jsonFilter = json_2.jsonFilter;\r\nvar math_2 = __webpack_require__(5);\r\nexports.mathFilter = math_2.mathFilter;\r\nvar string_2 = __webpack_require__(6);\r\nexports.stringFilter = string_2.stringFilter;\r\nvar toLower_2 = __webpack_require__(7);\r\nexports.toLowerFilter = toLower_2.toLowerFilter;\r\nvar toUpper_2 = __webpack_require__(8);\r\nexports.toUpperFilter = toUpper_2.toUpperFilter;\r\nvar template_2 = __webpack_require__(9);\r\nexports.templateFilter = template_2.templateFilter;\r\n/**\r\n * Inject default filters to current Karkas instance\r\n *\r\n * @export\r\n * @param {Karkas} karkasInstance\r\n */\r\nfunction injectDefaultFilters(karkasInstance) {\r\n    karkasInstance\r\n        .addFilter('currency', currency_1.currencyFilter)\r\n        .addFilter('string', string_1.stringFilter)\r\n        .addFilter('array', array_1.arrayFilter)\r\n        .addFilter('math', math_1.mathFilter)\r\n        .addFilter('json', json_1.jsonFilter)\r\n        .addFilter('capitalize', capitalize_1.capitalizeFilter)\r\n        .addFilter('toLower', toLower_1.toLowerFilter)\r\n        .addFilter('template', template_1.templateFilter)\r\n        .addFilter('toUpper', toUpper_1.toUpperFilter);\r\n}\r\nexports.injectDefaultFilters = injectDefaultFilters;\r\n;\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// karkas.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2edbe17ee7451b93ed9","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\n import { View } from './view';\r\n\r\n export class Karkas {\r\n  private _version = '4.0.0';\r\n\r\n  /**\r\n   * List of views\r\n   *\r\n   * @memberof Karkas\r\n   */\r\n  public views = new Map<string, View>();\r\n\r\n  /**\r\n   * List of filters\r\n   *\r\n   * @memberof Karkas\r\n   */\r\n  public filters = new Map<string, Function>();\r\n\r\n  public get version(): string {\r\n    return this._version;\r\n  }\r\n\r\n  /**\r\n   * Reset instance\r\n   *\r\n   * @memberof Karkas\r\n   */\r\n  public dispose() {\r\n    this.views.clear();\r\n  }\r\n\r\n  /**\r\n   * Get view\r\n   *\r\n   * @param {string} templateName\r\n   * @returns {string}\r\n   * @memberof Karkas\r\n   */\r\n  public getView(templateName: string): View {\r\n    if (!this.views.has(templateName)) {\r\n      throw new ReferenceError(`Karkas: View '${templateName}' is not defined`);\r\n    }\r\n\r\n    return this.views.get(templateName);\r\n  }\r\n\r\n  /**\r\n   * Get filter\r\n   *\r\n   * @param {string} filterName\r\n   * @returns {Function}\r\n   * @memberof Karkas\r\n   */\r\n  public getFilter(filterName: string): Function {\r\n    if (!this.filters.has(filterName)) {\r\n      throw new ReferenceError(`Karkas: Filter '${filterName}' is not defined`);\r\n    }\r\n\r\n    return this.filters.get(filterName);\r\n  }\r\n\r\n  /**\r\n   * Apply filter on query expression\r\n   *\r\n   * @param {string} filterQuery\r\n   * @param {*} value Target object\r\n   * @returns {string}\r\n   * @memberof Karkas\r\n   */\r\n  public filter(filterQuery: string, value: any): string {\r\n    // Extract filter name and args\r\n    const query = filterQuery.trim().split(\":\");\r\n    let filterName = query[0];\r\n\r\n    // Array of arguments that we will push to the filter\r\n    // At start there will be only expression value\r\n    value = [value];\r\n\r\n    // Try to find another args\r\n    if (query.length > 1) {\r\n        const filterArgs = (new Function(`return [${query[1].trim()}]`))();\r\n        value = value.concat(filterArgs);\r\n    }\r\n\r\n    if (!this.filters.has(filterName)) {\r\n      throw new ReferenceError(`Karkas: filter '${filterName}' is not defined`);\r\n    }\r\n\r\n    try {\r\n      // Find and call the filter with selected args\r\n      const filter = this.filters.get(filterName);\r\n      return filter.apply(this, value);\r\n    } catch (ex) {\r\n      throw new Error(`Karkas: failed to apply filter '${filterName}', reason: ${ex.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Compile template with content\r\n   *\r\n   * @param {string} templateName\r\n   * @param {(Array<any> | any)} [context={}]\r\n   * @returns\r\n   * @memberof Karkas\r\n   */\r\n  public compile(templateName: string, context: Array<any> | any = {}): string {\r\n    // Output buffer\r\n    const template = this.getView(templateName);\r\n\r\n    let output = '';\r\n\r\n    if (context instanceof Array) {\r\n      output = template.parseArray(context);\r\n    } else {\r\n      output = template.parse(context);\r\n    }\r\n\r\n    return output;\r\n  };\r\n\r\n\r\n  /**\r\n   * Create a new prepared view instance and injects it\r\n   *\r\n   * @param {string} name\r\n   * @param {string} template\r\n   * @returns {View}\r\n   * @memberof Karkas\r\n   */\r\n  public createView(name: string, template: string): View {\r\n    const view = new View(this, name, template);\r\n\r\n    this.views.set(\r\n      name,\r\n      view\r\n    );\r\n\r\n    return view;\r\n  }\r\n\r\n  /**\r\n   * Add filter\r\n   *\r\n   * @param {string} name\r\n   * @param {Function} filterFunc\r\n   * @returns {Karkas}\r\n   * @memberof Karkas\r\n   */\r\n  public addFilter(name: string, filterFunc: Function): Karkas {\r\n    this.filters.set(name, filterFunc);\r\n    return this;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./karkas.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Array filter\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function arrayFilter(value: Array<any>, operation: string, ...args: any[]) {\r\n    try {\r\n        return ([])[operation].apply(value, args);\r\n    } catch (ex) {\r\n        throw new Error(\"Failed to perform method `Array.\" + operation + \"` (\" + ex.message + \")\");\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/array.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas.filters.capitalize\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function capitalizeFilter(val: string) {\r\n    val = String(val);\r\n    return val.substring(0,1).toUpperCase()+val.substring(1);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/capitalize.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Currency filter\r\n *\r\n * @package karkas.filters.currency\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function currencyFilter($value: string, $currency: string = '$', $digitsToFixed: any) {\r\n    // Currency by default is USD\r\n    $currency = $currency || \"$\";\r\n\r\n\r\n    function formatMoney(n: any, c: number, d?: string, t?: string){\r\n        var c = isNaN(c = Math.abs(c)) ? 2 : c,\r\n            d = d == undefined ? \".\" : d,\r\n            t = t == undefined ? \",\" : t,\r\n            s = n < 0 ? \"-\" : \"\",\r\n            i: any = parseInt(n = Math.abs(+n || 0).toFixed(c)) + \"\",\r\n            j: number = (j = i.length) > 3 ? j % 3 : 0;\r\n        return s + (j ? i.substr(0, j) + t : \"\") + i.substr(j).replace(/(\\d{3})(?=\\d)/g, \"$1\" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : \"\");\r\n    }\r\n\r\n    return $currency + \" \" + formatMoney($value, $digitsToFixed);\r\n\r\n\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/currency.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * JSON filter\r\n *\r\n * @package karkas.filters.json\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function jsonFilter(val: any) {\r\n    try {\r\n        return JSON.stringify(val);\r\n    } catch (ex) {\r\n        return val;\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/json.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Math filter\r\n *\r\n * @package karkas.filters.math\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function mathFilter($value: number, $operation: string) {\r\n    try {\r\n        [].splice.apply(arguments,[1,1]);\r\n        return Math[$operation].apply(Math,arguments);\r\n    } catch(ex) {\r\n        throw new Error(\"Failed to perform method `Math.\"+$operation+\"` (\"+ex.message+\")\");\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/math.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * String filter\r\n *\r\n * @package karkas.filters.string\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function stringFilter(value: string, operation: string, ...args: any[]) {\r\n  try {\r\n      return String.prototype[operation].apply(value, args);\r\n  } catch (ex) {\r\n      throw new Error(`Failed to perform method 'String.${operation}' (${ex.message})`);\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/string.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas.filters.toLower\r\n * @version 3.0.0-b1\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function toLowerFilter(val: string) {\r\n    return String(val).toLowerCase();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/toLower.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas.filters.toUpper\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function toUpperFilter(val: string) {\r\n    return String(val).toUpperCase();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/toUpper.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Array filter\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nexport function templateFilter(value: any, templateName: string) {\r\n  if (typeof templateName === 'undefined') {\r\n    throw new ReferenceError('Template name is not defined');\r\n  }\r\n\r\n  try {\r\n      const v = this.compile(templateName, value);\r\n      console.log(value, templateName, v);\r\n      return v;\r\n  } catch (ex) {\r\n      throw new Error(`Failed to compile template '${templateName}' (${ex.message})`);\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/template.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nimport { Karkas } from './karkas';\r\nimport { KarkasDOM } from './karkas-dom';\r\nimport { injectDefaultFilters } from './filters';\r\n\r\n\r\n/**\r\n * Export suitable karkas version (DOM or common)\r\n */\r\nconst getInstance = (): Karkas => {\r\n  let instance = null;\r\n\r\n  if (typeof window !== 'undefined') {\r\n\r\n    if (typeof window['karkas'] === 'undefined') {\r\n      instance = new KarkasDOM();\r\n      window['karkas'] = instance;\r\n    } else {\r\n      instance = window['karkas'];\r\n    }\r\n\r\n  } else {\r\n    instance = new Karkas();\r\n  }\r\n\r\n  // Add default filters\r\n  injectDefaultFilters(instance);\r\n\r\n  return instance;\r\n}\r\n\r\nconst karkas = getInstance();\r\n\r\nexport default karkas;\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./index.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nimport { Karkas } from './karkas';\r\n\r\nconst SEARCH_PATTERN = /[\\{\\{](.*?)[\\}\\}]+/gim;\r\n\r\nconst valueParserFactory = (expressionName: string): Function => {\r\n  return new Function(`with(this) { return ${expressionName}; }`);\r\n}\r\n\r\nconst t = (v: any, t: string) => typeof v === t;\r\n\r\nconst def = (val: any) => !t(val, 'undefined');\r\n\r\nexport class View {\r\n\r\n  public name: string = null;\r\n\r\n  public content: string = null;\r\n\r\n  public get pattern() {\r\n    return SEARCH_PATTERN;\r\n  }\r\n\r\n  public constructor(private handler: Karkas, name: string, content: string = null) {\r\n    if (typeof content !== 'string') {\r\n      throw new ReferenceError('Karkas.View: Template content must be a string');\r\n    }\r\n\r\n    this.name = name;\r\n\r\n    this.content = content.trim();\r\n  }\r\n\r\n  /**\r\n   * Parse single expression from object\r\n   * @param   {Object} object     Object\r\n   * @param   {String} expression Expression\r\n   * @returns {*} Value\r\n   */\r\n  private parseExpression(object: any, expression: string) {\r\n      return valueParserFactory(expression).apply(object);\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse an single object using the template\r\n   * @param fields Object\r\n   * @returns {string} Compiled content\r\n   */\r\n  parse(fields: any): string {\r\n      let sReturn    = this.content.toString(),\r\n          tpFields   = sReturn.match(this.pattern);\r\n\r\n      for (let pat in tpFields){\r\n          let currentField = tpFields[pat];\r\n\r\n          if(t(currentField, 'string') || t(currentField, 'number')){\r\n            // Remove brackets and extract filters\r\n            const keys = currentField.replace('{{','').replace('}}','').trim().split('|');\r\n\r\n            // Check for filters and expressions\r\n            const filter = (keys.length > 1) ? keys[keys.length - 1] : undefined;\r\n            const key = keys[0];\r\n\r\n            //  replace expression with object\r\n            let newVal;\r\n\r\n            try {\r\n                newVal = this.parseExpression(fields, key);\r\n            } catch (ex) {\r\n                throw new ReferenceError(`Karkas: failed to parse expression '${key}' in template '${this.name}'. ${ex.message}`);\r\n            }\r\n\r\n            // If value is undefined - replace it\r\n            if (!def(newVal) ) newVal = '';\r\n\r\n\r\n            // Use filter or template if available in expression\r\n            if (def(filter)) {\r\n              newVal = this.handler.filter(filter, newVal);\r\n            }\r\n\r\n            sReturn = sReturn.replace(currentField, newVal);\r\n          }\r\n      }\r\n\r\n      return sReturn;\r\n  }\r\n\r\n\r\n  /**\r\n   * Parse an array of objects using the template\r\n   * @param arr\r\n   * @returns {string} Compiled content\r\n   */\r\n  public parseArray(arr: Array<any>): string {\r\n      return arr.map((i) => this.parse(i)).join('');\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./view.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nimport { Karkas } from './karkas';\r\n\r\nfunction def(e: any) { return typeof e !== 'undefined'; }\r\nfunction nul(e: any) { return e === null }\r\n\r\nconst COMPILED_ELEMENT_SELECTOR = '*[data-compile]',\r\n  COMPILED_ELEMENT_DATA = 'data-compile',\r\n  COMPILED_ELEMENT_TEMPLATE = 'data-view',\r\n  VIEW_SCRIPT_MIME_TYPE = 'text/karkas';\r\n\r\nconst DEF_ERR_CB = (e: any) => console.error(e);\r\n\r\n\r\nexport class KarkasDOM extends Karkas {\r\n  public constructor() {\r\n    super();\r\n\r\n    if (!def(window)) throw new ReferenceError('Karkas DOM extensions requries browser');\r\n    if (!def(window.document)) throw new Error('Karkas DOM extensions requires a document object');\r\n\r\n    document.addEventListener('DOMContentLoaded', () => this.refresh());\r\n  }\r\n\r\n  public onFind() { }\r\n\r\n  private compileElement(element: Element | HTMLElement) {\r\n    let tempName = element.getAttribute(COMPILED_ELEMENT_TEMPLATE),\r\n      tempData = element.getAttribute(COMPILED_ELEMENT_DATA);\r\n\r\n    if (nul(tempName)) throw new ReferenceError(COMPILED_ELEMENT_TEMPLATE + ' is undefined');\r\n    if (nul(tempData)) throw new ReferenceError(COMPILED_ELEMENT_DATA + ' is undefined');\r\n\r\n    tempName = tempName.trim();\r\n    tempData = tempData.trim();\r\n\r\n    try {\r\n      tempData = JSON.parse(tempData);\r\n      element.innerHTML += this.compile(tempName, tempData);\r\n    } catch (ex) {\r\n      console.error('Karkas: failed to compile element', {\r\n        element: element,\r\n        error: ex\r\n      });\r\n    }\r\n  }\r\n\r\n  public refresh(refreshItems: boolean = true) {\r\n    // Views container\r\n    if (refreshItems) this.dispose();\r\n\r\n    let templateSelector = `script[type=\"${VIEW_SCRIPT_MIME_TYPE}\"]`;\r\n\r\n    if (!refreshItems) templateSelector += ':not([data-loaded])';\r\n\r\n    // Select all templates\r\n    let w = document.querySelectorAll(templateSelector);\r\n\r\n    // Grep all elements\r\n    for (let c = 0; c < w.length; c++) {\r\n      this.createView(w[c].getAttribute(\"name\"), w[c].innerHTML);\r\n    }\r\n\r\n    // find items by attr and parse them\r\n    let requestedToParse = document.querySelectorAll(COMPILED_ELEMENT_SELECTOR);\r\n\r\n    if (!requestedToParse.length) return true;\r\n\r\n    for (let i = 0; i < requestedToParse.length; i++) {\r\n      this.compileElement(requestedToParse[i]);\r\n    }\r\n\r\n    if (typeof this.onFind === 'function') {\r\n      this.onFind();\r\n    }\r\n  };\r\n\r\n  public include(url: string, templateName: string, successCallback: Function = null): Promise<string> | void {\r\n    function makeRequest(onSuccess: Function, onError: Function = DEF_ERR_CB) {\r\n      let xhr = new XMLHttpRequest();\r\n\r\n      xhr.open(\"GET\", url);\r\n      xhr.onload = () => {\r\n        if (xhr.status >= 200 && xhr.status < 300) {\r\n          const template = this.createView(templateName, xhr.response);\r\n          onSuccess(template, xhr.response);\r\n        } else {\r\n          onError({\r\n            status: this.status,\r\n            statusText: xhr.statusText\r\n          });\r\n        }\r\n      };\r\n\r\n      xhr.onerror = () => {\r\n        if (def(onError)) {\r\n          onError({\r\n            status: xhr.status,\r\n            statusText: xhr.statusText\r\n          });\r\n        } else {\r\n          console.error('Karkas: Failed to import remote template: ', {\r\n            status: xhr.status,\r\n            statusText: xhr.statusText\r\n          });\r\n        }\r\n      };\r\n\r\n      xhr.send();\r\n    }\r\n\r\n    if (typeof url !== 'string') throw new ReferenceError('Karkas: Url is not a String');\r\n\r\n    templateName = templateName || url;\r\n\r\n    if ((typeof successCallback === 'function') || !('Promise' in window)) {\r\n      return makeRequest(successCallback);\r\n    }\r\n\r\n    return new Promise(makeRequest);\r\n  };\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./karkas-dom.ts","/**\r\n * Karkas.js (https://github.com/odin3/karkas)\r\n * Licensed by MIT license\r\n *\r\n * Karkas embedded filters\r\n *\r\n * @package karkas\r\n * @version 4.0.0\r\n * @author Denis Sedchenko\r\n */\r\n\r\nimport { Karkas } from '../karkas';\r\n\r\nimport { arrayFilter } from './array';\r\nimport { capitalizeFilter } from './capitalize';\r\nimport { currencyFilter } from './currency';\r\nimport { jsonFilter } from './json';\r\nimport { mathFilter } from './math';\r\nimport { stringFilter } from './string';\r\nimport { toLowerFilter } from './toLower';\r\nimport { toUpperFilter } from './toUpper';\r\nimport { templateFilter } from './template';\r\n\r\n\r\nexport { arrayFilter } from './array';\r\nexport { capitalizeFilter } from './capitalize';\r\nexport { currencyFilter } from './currency';\r\nexport { jsonFilter } from './json';\r\nexport { mathFilter } from './math';\r\nexport { stringFilter } from './string';\r\nexport { toLowerFilter } from './toLower';\r\nexport { toUpperFilter } from './toUpper';\r\nexport { templateFilter } from './template';\r\n\r\n\r\n/**\r\n * Inject default filters to current Karkas instance\r\n *\r\n * @export\r\n * @param {Karkas} karkasInstance\r\n */\r\nexport function injectDefaultFilters(karkasInstance: Karkas) {\r\n  karkasInstance\r\n      .addFilter('currency', currencyFilter)\r\n      .addFilter('string', stringFilter)\r\n      .addFilter('array', arrayFilter)\r\n      .addFilter('math', mathFilter)\r\n      .addFilter('json', jsonFilter)\r\n      .addFilter('capitalize', capitalizeFilter)\r\n      .addFilter('toLower', toLowerFilter)\r\n      .addFilter('template', templateFilter)\r\n      .addFilter('toUpper', toUpperFilter);\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ../node_modules/source-map-loader!./filters/index.ts"],"sourceRoot":""}